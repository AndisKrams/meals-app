{% extends 'base.html' %}
{% block content %}
  <h2>Order Meals</h2>
  <form method="get" class="mb-3">
    <label for="date">Select date:</label>
    <select name="date" id="date" onchange="this.form.submit()">
      {% for date in available_dates %}
        <option value="{{ date|date:'Y-m-d' }}" {% if date|date:'Y-m-d' == selected_date %}selected{% endif %}>{{ date|date:'M j, Y' }}</option>
      {% endfor %}
    </select>
  </form>
  {% if meal_registration %}
    <form method="post">
      {% csrf_token %}
      {% for child, form in forms %}
        <div class="card mb-3">
          <div class="card-header">
            <strong>{{ child.first_name }} {{ child.last_name }} ({{ child.class_name }})</strong>
          </div>
          <div class="card-body">
            {{ form.as_p }}
          </div>
        </div>
      {% endfor %}
      <button type="submit" class="btn btn-primary">Save Choices</button>
    </form>
  {% else %}
    <p>No meals registered for this date.</p>
  {% endif %}
{% endblock %}
